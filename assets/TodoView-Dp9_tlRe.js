import{b as _,d as A,r as $,e as D,o as d,c,a as r,F as h,f,t as g,g as x,_ as L,h as N,i as b,w as U,v as F,j as B,k as M,u as w,n as j,p as q,l as z}from"./index-D010OEHx.js";import{B as V}from"./BaseInput-BIAHJXDi.js";const k="/api/todo",G=()=>_.get(`${k}`),O=e=>_.post(`${k}`,e),R=e=>_.delete(`${k}/${e}`),H=(e,l)=>_.put(`${k}/${e}`,l),J=A("todo",()=>{const e=$([]),l=D(()=>e.value),y=n=>D(()=>e.value.find(p=>p.id===n));async function u(){try{const{data:n}=await G();e.value=n}catch({message:n,error:p}){throw n??p}}async function o(n){try{await O(n),await u()}catch({message:p,error:v}){throw p??v}}return{getTodo:l,init:u,getDetail:y,addTodo:o,removeTodo:async n=>{try{await R(n),await u()}catch({message:p,error:v}){throw p??v}},editTodo:async(n,p)=>{try{await H(n,p),await u()}catch({message:v,error:T}){throw v??T}}}}),K={key:0},P={key:0},Q=["onClick"],W={__name:"BaseTable",props:{columns:{type:Array,default:()=>[]},actions:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]}},setup(e){return(l,y)=>(d(),c("table",null,[r("thead",null,[r("tr",null,[(d(!0),c(h,null,f(e.columns,(u,o)=>(d(),c("th",{key:o},g(u),1))),128)),e.actions.length?(d(),c("th",K,"action")):x("",!0)])]),r("tbody",null,[(d(!0),c(h,null,f(e.data,(u,o)=>(d(),c("tr",{key:o},[(d(!0),c(h,null,f(e.columns,(i,m)=>(d(),c("td",{key:m},g(u[i]),1))),128)),e.actions.length?(d(),c("td",P,[(d(!0),c(h,null,f(e.actions,(i,m)=>(d(),c("button",{key:m,onClick:n=>l.$emit(`${i.event}`,u)},g(i.title),9,Q))),128))])):x("",!0)]))),128))])]))}},C=e=>(q("data-v-bbd1536f"),e=e(),z(),e),X={class:"container"},Y={class:"checkbox"},Z=C(()=>r("button",{type:"reset"},"Cancel",-1)),ee={type:"submit"},te=C(()=>r("h4",null,"Tasks",-1)),oe={class:"list"},ae=["onDblclick"],le=["onClick","disabled"],ne=["onClick","disabled"],se=C(()=>r("h4",null,"Table",-1)),de={__name:"TodoView",setup(e){const l=J(),y={title:"",description:"",category:"",completed:!1},u={columns:["id","title","description","completed"],actions:[{title:"log",event:"log-event"},{title:"toggle",event:"toggle-event"}]},o=$({...y}),i=$(!1),m=()=>{Object.assign(o.value,y),i.value=!1};async function n(){const s={...o.value};i.value===!1?await l.addTodo(s):await l.editTodo(i.value,s),m()}function p(s){const a=l.getDetail(s);o.value={...a.value},i.value=s}async function v(s){const a=l.getDetail(s);await l.editTodo(s,{...a.value,completed:!a.value.completed})}async function T(s){try{console.log(s)}catch(a){console.error(a)}}async function E(s){try{await v(s.id)}catch(a){console.error(a)}}return N(async()=>await l.init()),(s,a)=>{var S;return d(),c("div",X,[r("h1",null,"Test "+g((S=s.$route.params)==null?void 0:S.id),1),r("form",{class:"form",onSubmit:M(n,["prevent"]),onReset:m},[b(V,{modelValue:o.value.title,"onUpdate:modelValue":a[0]||(a[0]=t=>o.value.title=t),name:"title",placeholder:"Gaming",required:""},null,8,["modelValue"]),b(V,{modelValue:o.value.description,"onUpdate:modelValue":a[1]||(a[1]=t=>o.value.description=t),name:"description",placeholder:"Everyday",required:""},null,8,["modelValue"]),b(V,{modelValue:o.value.category,"onUpdate:modelValue":a[2]||(a[2]=t=>o.value.category=t),name:"category",placeholder:"Todo"},null,8,["modelValue"]),r("div",Y,[U(r("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=t=>o.value.completed=t),name:"completed"},null,512),[[F,o.value.completed]]),B(" Completed ")]),Z,r("button",ee,g(i.value!==!1?"Save":"Submit"),1)],32),te,r("ol",oe,[(d(!0),c(h,null,f(w(l).getTodo,(t,I)=>(d(),c("li",{key:I,class:j({strike:t==null?void 0:t.completed}),onDblclick:ce=>v(t.id)},[r("button",{class:"red",onClick:()=>w(l).removeList(t.id),disabled:i.value!==!1},"×",8,le),r("button",{class:"orange",onClick:()=>p(t.id),disabled:i.value!==!1},"✎",8,ne),B(" "+g(t==null?void 0:t.title)+" - "+g(t!=null&&t.description?t.description:""),1)],42,ae))),128))]),se,b(W,{data:w(l).getTodo,columns:u.columns,actions:u.actions,onLogEvent:T,onToggleEvent:E},null,8,["data","columns","actions"])])}}},ue=L(de,[["__scopeId","data-v-bbd1536f"]]);export{ue as default};
