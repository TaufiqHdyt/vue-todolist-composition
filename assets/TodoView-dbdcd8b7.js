import{b,d as A,r as $,e as x,o as d,c,a as i,F as g,f as h,t as _,g as B,_ as L,h as N,i as f,w as U,v as F,j as D,k as M,u as w,n as j,p as q,l as z}from"./index-a70ac487.js";import{B as V}from"./BaseInput-eba04ee1.js";const T="/api/todo",G=()=>b.get(`${T}`),O=e=>b.post(`${T}`,e),R=e=>b.delete(`${T}/${e}`),H=(e,n)=>b.put(`${T}/${e}`,n),J=A("todo",()=>{const e=$([]),n=x(()=>e.value),y=l=>x(()=>e.value.find(p=>p.id===l));async function u(){try{const{data:l}=await G();e.value=l}catch({message:l,error:p}){throw l??p}}async function o(l){try{await O(l),await u()}catch({message:p,error:v}){throw p??v}}return{getTodo:n,init:u,getDetail:y,addTodo:o,removeTodo:async l=>{try{await R(l),await u()}catch({message:p,error:v}){throw p??v}},editTodo:async(l,p)=>{try{await H(l,p),await u()}catch({message:v,error:k}){throw v??k}}}});const K={key:0},P={key:0},Q=["onClick"],W={__name:"BaseTable",props:{columns:{type:Array,default:()=>[]},actions:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]}},setup(e){return(n,y)=>(d(),c("table",null,[i("thead",null,[i("tr",null,[(d(!0),c(g,null,h(e.columns,(u,o)=>(d(),c("th",{key:o},_(u),1))),128)),e.actions.length?(d(),c("th",K,"action")):B("",!0)])]),i("tbody",null,[(d(!0),c(g,null,h(e.data,(u,o)=>(d(),c("tr",{key:o},[(d(!0),c(g,null,h(e.columns,(r,m)=>(d(),c("td",{key:m},_(u[r]),1))),128)),e.actions.length?(d(),c("td",P,[(d(!0),c(g,null,h(e.actions,(r,m)=>(d(),c("button",{key:m,onClick:l=>n.$emit(`${r.event}`,u)},_(r.title),9,Q))),128))])):B("",!0)]))),128))])]))}};const C=e=>(q("data-v-bbd1536f"),e=e(),z(),e),X={class:"container"},Y=["onSubmit"],Z={class:"checkbox"},ee=C(()=>i("button",{type:"reset"},"Cancel",-1)),te={type:"submit"},oe=C(()=>i("h4",null,"Tasks",-1)),ae={class:"list"},ne=["onDblclick"],le=["onClick","disabled"],se=["onClick","disabled"],de=C(()=>i("h4",null,"Table",-1)),ce={__name:"TodoView",setup(e){const n=J(),y={title:"",description:"",category:"",completed:!1},u={columns:["id","title","description","completed"],actions:[{title:"log",event:"log-event"},{title:"toggle",event:"toggle-event"}]},o=$({...y}),r=$(!1),m=()=>{Object.assign(o.value,y),r.value=!1};async function l(){const s={...o.value};r.value===!1?await n.addTodo(s):await n.editTodo(r.value,s),m()}function p(s){const a=n.getDetail(s);o.value={...a.value},r.value=s}async function v(s){const a=n.getDetail(s);await n.editTodo(s,{...a.value,completed:!a.value.completed})}async function k(s){try{console.log(s)}catch(a){console.error(a)}}async function E(s){try{await v(s.id)}catch(a){console.error(a)}}return N(async()=>await n.init()),(s,a)=>{var S;return d(),c("div",X,[i("h1",null,"Test "+_((S=s.$route.params)==null?void 0:S.id),1),i("form",{class:"form",onSubmit:M(l,["prevent"]),onReset:m},[f(V,{modelValue:o.value.title,"onUpdate:modelValue":a[0]||(a[0]=t=>o.value.title=t),name:"title",placeholder:"Gaming",required:""},null,8,["modelValue"]),f(V,{modelValue:o.value.description,"onUpdate:modelValue":a[1]||(a[1]=t=>o.value.description=t),name:"description",placeholder:"Everyday",required:""},null,8,["modelValue"]),f(V,{modelValue:o.value.category,"onUpdate:modelValue":a[2]||(a[2]=t=>o.value.category=t),name:"category",placeholder:"Todo"},null,8,["modelValue"]),i("div",Z,[U(i("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=t=>o.value.completed=t),name:"completed"},null,512),[[F,o.value.completed]]),D(" Completed ")]),ee,i("button",te,_(r.value!==!1?"Save":"Submit"),1)],40,Y),oe,i("ol",ae,[(d(!0),c(g,null,h(w(n).getTodo,(t,I)=>(d(),c("li",{key:I,class:j({strike:t==null?void 0:t.completed}),onDblclick:ie=>v(t.id)},[i("button",{class:"red",onClick:()=>w(n).removeList(t.id),disabled:r.value!==!1},"×",8,le),i("button",{class:"orange",onClick:()=>p(t.id),disabled:r.value!==!1},"✎",8,se),D(" "+_(t==null?void 0:t.title)+" - "+_(t!=null&&t.description?t.description:""),1)],42,ne))),128))]),de,f(W,{data:w(n).getTodo,columns:u.columns,actions:u.actions,onLogEvent:k,onToggleEvent:E},null,8,["data","columns","actions"])])}}},pe=L(ce,[["__scopeId","data-v-bbd1536f"]]);export{pe as default};
